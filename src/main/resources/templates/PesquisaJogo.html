<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{LayoutPadrao}">
<head>
    <!-- CSS com th:href -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
    <link rel="stylesheet" th:href="@{/css/style.css}" />

    <!-- Versão CDN para validação OBS: sem th:ref -->
    <!--  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">  -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>  -->


    <!-- Scripts também com th:src -->
    <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
</head>
<section layout:fragment="conteudo">
    <div class="container mt-4">
        <div th:replace="~{Mensagem :: alert}"></div>

        <div class="card rounded-lg shadow-lg mx-auto" style="max-width: 1000px;">
            <div class="card-header bg-primary text-white p-4 rounded-t-lg flex justify-between items-center">
                <h2 class="text-xl font-bold">Pesquisa de Jogos</h2>
                <a href="/jogos/novo" class="btn btn-light rounded-md px-4 py-2 text-sm font-medium hover:bg-gray-200">Novo Jogo</a>
            </div>
            <div class="card-body p-6">
                <table class="table table-bordered table-striped rounded-md overflow-hidden">
                    <thead class="bg-gray-100">
                    <tr>
                        <th scope="col" class="text-center py-3 px-4">#</th>
                        <th scope="col" class="py-3 px-4">Título do Jogo</th>
                        <th scope="col" class="py-3 px-4">Gênero</th>
                        <th scope="col" class="text-center py-3 px-4">Ano de Lançamento</th>
                        <th scope="col" class="text-center py-3 px-4">Plataforma</th>
                        <th scope="col" class="text-center py-3 px-4">Status</th>
                        <th scope="col" class="py-3 px-4"></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:if="${#lists.isEmpty(jogos)}">
                        <td colspan="7" class="text-center py-4 text-gray-500">Nenhum jogo encontrado.</td>
                    </tr>
                    <tr th:each="jogo : ${jogos}">
                        <td class="text-center py-3 px-4" th:text="${jogo.id}"></td>
                        <td class="py-3 px-4" th:text="${jogo.titulo}"></td>
                        <td class="py-3 px-4" th:text="${jogo.genero}"></td>
                        <td class="text-center py-3 px-4" th:text="${jogo.anoLancamento}"></td>
                        <td class="text-center py-3 px-4" th:text="${jogo.plataforma.descricao}"></td>
                        <td class="text-center py-3 px-4">
                                <span class="badge"
                                      th:text="${jogo.status.descricao}"
                                      th:classappend="
                                             ${jogo.isParaJogar()} ? 'bg-danger' :
                                             (${jogo.status.name() == 'JOGANDO'} ? 'bg-warning text-dark' : 'bg-success')">
                                </span>
                        </td>
                        <td class="py-3 px-4 text-center">
                            <a th:href="@{/jogos/{id}(id=${jogo.id})}" class="text-blue-600 hover:text-blue-800 mr-2">
                                <i class="material-icons text-lg">Editar</i>
                            </a>
                            <button type="button" class="btn btn-link p-0 text-red-600 hover:text-red-800 js-delete-button"
                                    data-bs-toggle="modal" data-bs-target="#confirmacaoExclusaoModal"
                                    th:attr="data-id=${jogo.id}, data-title=${jogo.titulo}">
                                <i class="material-icons text-lg">Apagar</i>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div th:replace="~{DialogoConfirmacaoModal :: modal}"></div>
</section>

</html>
